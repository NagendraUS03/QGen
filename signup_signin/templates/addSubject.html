<!DOCTYPE html>
<html lang="en" class="light">
<head>
  <meta charset="UTF-8">
  <title>Add Subject | QGen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' }
  </script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-100 transition-colors duration-300">
    {% include 'partials/HeaderNavBar.html' %}
  <main class="max-w-3xl mx-auto p-6 mt-8 bg-white dark:bg-gray-800 shadow-lg rounded-lg">
    <h1 class="text-2xl font-bold mb-6 text-indigo-600 dark:text-indigo-400">âž• Add New Subject</h1>
    <form method="POST" action="{{ url_for('main.add_subject') }}" class="grid gap-4">
      <div>
        <label class="block mb-1 text-sm font-medium">Subject Name</label>
        <input name="subject_name" required type="text" class="w-full px-4 py-2 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
      </div>
      <div>
        <label class="block mb-1 text-sm font-medium">Subject Code</label>
        <input name="subject_code" required type="text" class="w-full px-4 py-2 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
      </div>
      <div>
        <label class="block mb-1 text-sm font-medium">Syllabus Scheme</label>
        <select id="scheme_select" name="scheme" required class="w-full px-4 py-2 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
          <option value="">-- Select Scheme --</option>
          {% for scheme in schemes %}
            <option value="{{ scheme }}">{{ scheme }}</option>
          {% endfor %}
          <option value="add_new">+ Add New Scheme</option>
        </select>
        <p class="text-xs text-gray-500 mt-1">Don't find your scheme? Select "Add New Scheme" to enter it manually.</p>
        <div id="new_scheme_container" class="hidden mt-2">
          <input type="text" id="new_scheme" name="new_scheme" placeholder="Enter new scheme year" class="w-full px-4 py-2 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
        </div>
      </div>
      <div>
        <label class="block mb-1 text-sm font-medium">Semester</label>
        <select name="semester" required class="w-full px-4 py-2 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
          <option value="">-- Select Semester --</option>
          {% for i in range(1, 9) %}
          <option value="{{ i }}">Semester {{ i }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block mb-1 text-sm font-medium">Credits</label>
        <input name="credits" required type="number" min="1" class="w-full px-4 py-2 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
      </div>
      <div>
        <label class="block mb-1 text-sm font-medium">Total Marks</label>
        <input name="total_marks" required type="number" min="1" class="w-full px-4 py-2 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800">
      </div>
      <div class="flex justify-end mt-4">
        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md">Save</button>
      </div>
    </form>
  </main>
  {% include 'partials/footer.html' %}

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const schemeSelect = document.getElementById('scheme_select');
      const newSchemeContainer = document.getElementById('new_scheme_container');
      const newSchemeInput = document.getElementById('new_scheme');
      
      schemeSelect.addEventListener('change', function() {
        if (this.value === 'add_new') {
          newSchemeContainer.classList.remove('hidden');
          newSchemeInput.required = true;
          schemeSelect.name = ''; // Remove the name attribute from the select
        } else {
          newSchemeContainer.classList.add('hidden');
          newSchemeInput.required = false;
          newSchemeInput.value = '';
          schemeSelect.name = 'scheme'; // Add back the name attribute
        }
      });
    });
  </script>
</body>
</html>
