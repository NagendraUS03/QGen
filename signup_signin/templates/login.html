<!DOCTYPE html>
<html lang="en" class="bg-gray-900 text-white">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex items-center justify-center min-h-screen px-4">
  <div class="bg-gray-800 shadow-lg rounded-xl w-full max-w-md p-6 space-y-6">
    <h2 class="text-2xl font-bold text-center text-indigo-400">Login</h2>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="px-4 py-2 rounded text-sm 
            {% if category == 'success' %}bg-green-100 text-green-700
            {% elif category == 'danger' %}bg-red-100 text-red-700
            {% elif category == 'warning' %}bg-yellow-100 text-yellow-800
            {% else %}bg-blue-100 text-blue-800{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form method="POST" class="space-y-4">
      {{ form.hidden_tag() }}

      <!-- Email Field -->
      <div>
        <label class="block text-sm font-medium text-white mb-1">{{ form.email.label }}</label>
        {{ form.email(size=32, class="w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-400") }}
      </div>

      <!-- Password Field with Eye Icon -->
      <div>
        <label class="block text-sm font-medium text-white mb-1">{{ form.password.label }}</label>
        <div class="relative">
          {{ form.password(size=32, id="login-password", class="w-full px-3 py-2 pr-10 rounded bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-400") }}
          <span class="absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer text-white" onclick="togglePassword(this)">üëÅÔ∏è</span>
        </div>
      </div>

      <!-- Forgot Password Link (this is new) -->
      <div class="text-right">
        <a href="{{ url_for('main.forgot_password') }}" class="text-sm text-indigo-400 hover:underline">
          Forgot Password?
        </a>
      </div>

      <!-- Submit Button -->
      <div>
        {{ form.submit(class="w-full bg-indigo-500 hover:bg-indigo-600 text-white py-2 rounded-lg font-semibold") }}
      </div>
    </form>

    <!-- Sign up Link -->
    <p class="text-sm text-center text-gray-300">Don't have an account?
      <a href="{{ url_for('main.signup') }}" class="text-indigo-400 hover:underline">Sign up</a>
    </p>
  </div>

  <!-- Password Toggle JS -->
  <script>
    function togglePassword(icon) {
      const input = icon.previousElementSibling;
      if (input.type === "password") {
        input.type = "text";
        icon.textContent = "üôà";
      } else {
        input.type = "password";
        icon.textContent = "üëÅÔ∏è";
      }
    }
  </script>
</body>
</html>

